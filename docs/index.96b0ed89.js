const e=document.querySelector("#mockup"),t=e.getContext("2d"),h=document.createElement("img"),i=document.querySelector("#temp"),n=i.getContext("2d");let r=[];fetch("./list.json").then((e=>e.json())).then((e=>{for(let t=0;t<e.palette.length;t++)r.push(e.palette[t].color)}));const a=e=>{let t=768,h=r[0];for(let i=0;i<r.length;i++){let n=0;for(let t=0;t<3;t++)n+=Math.abs(e[t]-parseInt(r[i].substring(2*t+1,2*t+3),16));n<t&&(t=n,h=r[i])}return h};h.addEventListener("load",(()=>{t.clearRect(0,0,e.width,e.height),n.clearRect(0,0,i.width,i.height),(()=>{i.width=29,i.height=29,e.width=580,e.height=580;let t=h.width,r=h.height;r*=i.width/t,t=i.width,r>i.height&&(t*=i.height/r,r=i.height),n.drawImage(h,0,0,h.width,h.height,(i.width-t)/2,(i.height-r)/2,t,r)})(),(()=>{for(let e=0;e<i.width;e++)for(let h=0;h<i.height;h++){const i=n.getImageData(e,h,1,1).data;t.beginPath(),t.arc((10+20*e)/1,(10+20*h)/1,8,0,2*Math.PI),t.lineWidth=5,t.strokeStyle=a(i),t.stroke()}})()}),!1),e.addEventListener("dragover",(e=>{e.preventDefault()}),!1),e.addEventListener("drop",(e=>{const t=e.dataTransfer.files;if(t.length>0){const e=t[0];if("undefined"!=typeof FileReader&&-1!=e.type.indexOf("image")){const t=new FileReader;t.onload=e=>{h.src=e.target.result},t.readAsDataURL(e)}}e.preventDefault()}),!1);