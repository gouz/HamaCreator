const e=document.querySelector("#mockup"),t=e.getContext("2d"),a=document.createElement("img"),h=document.querySelector("#temp"),i=h.getContext("2d"),d=["#aaffee","#cc44cc","#00cc55","#0000aa"],r=e=>{let t=768,a=d[0];for(let h=0;h<d.length;h++){let i=0;for(let t=0;t<3;t++)i+=Math.abs(e[t]-parseInt(d[h].substring(2*t+1,2*t+3),16));i<t&&(t=i,a=d[h])}return a};a.addEventListener("load",(()=>{t.clearRect(0,0,e.width,e.height),i.clearRect(0,0,h.width,h.height),(()=>{h.width=29,h.height=29,e.width=580,e.height=580;let t=a.width,d=a.height;d*=h.width/t,t=h.width,d>h.height&&(t*=h.height/d,d=h.height),i.drawImage(a,0,0,a.width,a.height,(h.width-t)/2,(h.height-d)/2,t,d)})();for(let e=0;e<h.width;e++)for(let a=0;a<h.height;a++){const h=i.getImageData(e,a,1,1).data;t.beginPath(),t.arc((10+20*e)/1,(10+20*a)/1,8,0,2*Math.PI),t.lineWidth=5,t.strokeStyle=r(h),t.stroke()}}),!1),e.addEventListener("dragover",(e=>{e.preventDefault()}),!1),e.addEventListener("drop",(e=>{const t=e.dataTransfer.files;if(t.length>0){const e=t[0];if("undefined"!=typeof FileReader&&-1!=e.type.indexOf("image")){const t=new FileReader;t.onload=e=>{a.src=e.target.result},t.readAsDataURL(e)}}e.preventDefault()}),!1);